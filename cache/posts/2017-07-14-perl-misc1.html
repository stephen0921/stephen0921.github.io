
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">print中内嵌函数</h2>
<div class="outline-text-2" id="text-1">
<p>
有的时候，我们想要print一些信息，但是又要对信息处理后打印，我们不得不分成两部分来做。
</p>

<div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">@array</span> <span class="o">=</span> <span class="sx">qw(abc de fgh)</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$tmp</span> <span class="o">=</span> <span class="nb">join</span> <span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="nv">@array</span><span class="p">;</span>

<span class="k">print</span> <span class="s">&quot;$tmp\n&quot;</span><span class="p">;</span>
</pre></div>

<p>
如果特别想省去$tmp这个临时变量，可以像下面的方式来写。
</p>

<div class="highlight"><pre><span></span><span class="nv">@array</span> <span class="o">=</span> <span class="sx">qw(abc de fgh)</span><span class="p">;</span>
<span class="k">print</span> <span class="s">&quot;@{[join &#39;:&#39;,@array]}&quot;</span><span class="p">;</span>
</pre></div>

<p>
@{[code]}这种写法是把code的执行结果先转成array reference，然后在变成array，很巧妙的写法！
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">按照文件的创建时间排序</h2>
<div class="outline-text-2" id="text-2">
<p>
这个需求的出发场景是，比如一个工具生成autohref.txt文件，等再run一次，工具生成autohref1.txt，以此类推。
如果我想对最新的autohref*.txt文件进行处理，一般的方法是找匹配/autohref(\d+)\.txt/的文件，同时$1是最大的。
但是，如果用户删除了其中一个autohref4.txt，那么下次run这个工具，就有可能破坏了这个前提。所以，去找最新的这个文件是比较保险的。
</p>

<div class="highlight"><pre><span></span><span class="k">my</span> <span class="nv">@files</span> <span class="o">=</span> <span class="nb">glob</span> <span class="s">&#39;./autohref*.txt&#39;</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">@files_in_order</span> <span class="o">=</span> <span class="nb">sort</span> <span class="p">{(</span><span class="nb">stat</span> <span class="nv">$b</span><span class="p">)[</span><span class="mi">10</span><span class="p">]</span> <span class="sr">&lt;=&gt;</span> <span class="p">(</span><span class="nb">stat</span> <span class="nv">$a</span><span class="p">)[</span><span class="mi">10</span><span class="p">]}</span> <span class="nv">@files</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$latest_file</span> <span class="o">=</span> <span class="nb">shift</span> <span class="nv">@files_in_order</span><span class="p">;</span>
</pre></div>

<p>
函数stat的用法，<a href="http://perldoc.perl.org/functions/stat.html">来这里看</a> 。
</p>
</div>
</div>
